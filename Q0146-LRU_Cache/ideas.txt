Use hashmap and double linkedlist.

Time complexity : O(1) both for put and get.

Space complexity : O(capacity) since the space is used only for a hashmap and double linked list with at most capacity + 1 elements.
